## 目标
实现本章介绍的所有芯片 。你可以使用的模块包括在前面章节中介绍的芯片，以及你逐渐构建起来的芯片。
| 加法器 | 芯片名 | 功能 |
| --- | --- | --- |
| 半加器 | HalfAdder | 实现两个2位二进制数加法 |
| 全加器 | FullAdder | 实现三个3位二进制数加法 |
| 16位加法器 | Adder | 实现两个16位二进制数加法 |
| 16位增量器 | Inc16 | 输出16位二进制数+1 |
| 算术逻辑单元 | ALU | 实现两个16位二进制数置零、取反、相加 (Adder) 以及布尔运算 |

---

## ALU
**输入:**
*   `x[16], y[16],` 两个 16 位数据输入
*   `zx,` x 输入置零
*   `nx,` x 输入取反
*   `zy,` y 输入置零
*   `ny,` y 输入取反
*   `f,` 功能码：为 1 则代表 Add，为 0 则代表 And
*   `no` out 输出取反
  
**输出:**
*   `out[16],` 16 位输出
*   `zr,` 若 out = 0 则为 True, 否则 False
*   `ng` 若 out < 0 则为 True, 否则 False

**功能:**
```
if zx then x = 0        // 16位常量 0
if nx then x = !x       // 按位取反
if zy then y = 0        // 16位常量 0
if ny then y = !y       // 按位取反
if f then out = x + y   // 2补码的整数加法
else out = x & y        // 按位与运算 (And)
if no then out = !out   // 按位取反
if out=0 then zr = 1 else zr = 0    // 16位 eq. 比较
if out<0 then ng = 1 else ng = 0    // 16位 neg. 比较
```
**说明:** 不处理溢出的情况。

#### ALU 真值表。前六列二进制码表示的操作执行最右边列的函数（此处用符号!，&，和丨来分别表示 Not，And 和 Or）。完整的 ALU 真值表包含 64 行，这里只列出了其中的 18 行。

| 这些位指示 <br> 如何预设 x 输入 | | 这些位指示 <br> 如何预设 y 输入 | | 此位用来选择 <br> 是+还是 And | 此位指示 <br> 如何设置 out | 生成的 <br> ALU 输出 |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| **zx** | **nx** | **zy** | **ny** | **f** | **no** | **out =** |
| `if zx then` <br> `x=0` | `if nx then` <br> `x=!x` | `if zy then` <br> `y=0` | `if ny then` <br> `y=!y` | `if f then` <br> `out=x+y` <br> `else` <br> `out=x&y` | `if no then` <br> `out=!out` | `f(x,y)=` |
| 1 | 0 | 1 | 0 | 1 | 0 | 0 |
| 1 | 1 | 1 | 1 | 1 | 1 | 1 |
| 1 | 1 | 1 | 0 | 1 | 0 | -1 |
| 0 | 0 | 1 | 1 | 0 | 0 | x |
| 1 | 1 | 0 | 0 | 0 | 0 | y |
| 0 | 0 | 1 | 1 | 0 | 1 | ! x |
| 1 | 1 | 0 | 0 | 0 | 1 | ! y |
| 0 | 0 | 1 | 1 | 1 | 1 | -x |
| 1 | 1 | 0 | 0 | 1 | 1 | -y |
| 0 | 1 | 1 | 1 | 1 | 1 | x+1 |
| 1 | 1 | 0 | 1 | 1 | 1 | y+1 |
| 0 | 0 | 1 | 1 | 1 | 0 | x-1 |
| 1 | 1 | 0 | 0 | 1 | 0 | y-1 |
| 0 | 0 | 0 | 0 | 1 | 0 | x+y |
| 0 | 1 | 0 | 0 | 1 | 1 | x-y |
| 0 | 0 | 0 | 1 | 1 | 1 | y-x |
| 0 | 0 | 0 | 0 | 0 | 0 | x&y |
| 0 | 1 | 0 | 1 | 0 | 1 | x\|y |